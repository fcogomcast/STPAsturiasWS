plugins {
    id 'war'
    id 'java'
}

repositories {
    jcenter()
}

// Configuraci�n de compilaci�n y ejecuci�n
sourceCompatibility = 1.8
targetCompatibility = 1.8

// Dependencias del proyecto
dependencies {
    // A�ade las dependencias que necesites desde la carpeta 'webcontent/lib'
    implementation fileTree(dir: 'webcontent/WEB-INF/lib', include: ['*.jar'])
    //implementation fileTree(dir: 'webcontent/WEB-INF', include: ['*.xml'])
    //implementation 'javax.servlet:javax.servlet-api:3.1.0'
    implementation 'javax.mail:mail:1.4'
    // A�ade otras dependencias aqu�
}
// Ruta de las clases Java a compilar
sourceSets {
    main {
        java {
            srcDirs 'src'
        }
    }
}

// Tareas de compilaci�n y empaquetado
tasks.withType(JavaCompile) {
    options.encoding = 'Cp1252'
}

// Configuraci�n espec�fica para el plugin 'war'
war {
    archiveFileName = "$buildDir/target/WSNotificaGestionEnvios.war" // Cambia esto por el nombre que desees para tu archivo WAR

    // Agrega archivo HandleChange.xml
    from('src/es/stpa/notificagestionenvios') {
        include '**/*.xml'
        into 'WEB-INF/classes/es/stpa/notificagestionenvios'
    }

    //Agrega carpeta WSDL con archiVos
    from('src/es/gob/administracionelectronica/notifica/ws/notificaws_v2/wsdl') {
        into 'WEB-INF/classes/es/gob/administracionelectronica/notifica/ws/notificaws_v2/wsdl'
    }

    // Agrega solo los archivos XML de la carpeta WEB-INF
    webInf {
        from 'webcontent/WEB-INF', {
            include '*.xml'
        }
    }
}

